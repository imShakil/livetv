(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67872,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(66987),l=e.i(7222),r=e.i(11346),i=e.i(70191),n=e.i(19439),o=e.i(80464),d=e.i(6325),u=e.i(22561),c=e.i(23363),m=e.i(55568),h=e.i(12935),p=e.i(82987);function f(e){try{return decodeURIComponent(e)}catch{return e}}function y(e,t){let a=e.startsWith("?")?e.slice(1):e;if(!a)return"";for(let e of a.split("&")){if(!e)continue;let[a,...s]=e.split("=");if(f(a)===t)return f(s.join("=").replace(/\+/g," "))}return""}async function g(e){try{let t=await fetch(e,{method:"GET",cache:"no-store",headers:{Accept:"text/plain,application/vnd.apple.mpegurl,application/x-mpegURL,text/html,*/*"}});if(!t.ok)return{isPlaylist:!1,inferredType:""};let a=await t.text();return function(e){let t=e.split("\n").map(e=>e.trim()).filter(Boolean);if(0===t.length)return{isPlaylist:!1};let a=e.toLowerCase(),s=t.filter(e=>e.startsWith("#EXTINF")),l=t.filter(e=>!e.startsWith("#")&&/^https?:\/\//i.test(e)),r=t.some(e=>e.startsWith("#EXT-X-TARGETDURATION")||e.startsWith("#EXT-X-MEDIA-SEQUENCE")||e.startsWith("#EXT-X-ENDLIST")||e.startsWith("#EXT-X-PART")||e.startsWith("#EXT-X-MAP")),i=t.some(e=>e.startsWith("#EXT-X-STREAM-INF")),n=s.some(e=>/(tvg-|group-title=|catchup=)/i.test(e));return/<iframe[\s>]/i.test(a)?{isPlaylist:!1,inferredType:"iframe"}:n?{isPlaylist:!0}:i||r?{isPlaylist:!1}:l.length>1?{isPlaylist:!0}:{isPlaylist:!1}}(a)}catch{return{isPlaylist:!1,inferredType:""}}}function x(){let[e,f]=(0,a.useState)(""),[x,b]=(0,a.useState)("auto"),[w,C]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),[T,P]=(0,a.useState)(null),[S,E]=(0,a.useState)([]),[N,R]=(0,a.useState)(!1),[U,L]=(0,a.useState)(!1),A=(0,a.useRef)(""),X=(0,d.default)(),{maybeShowInterstitial:I,showRewarded:W,rewardedEnabled:_,rewardedLabel:k,isRewardedLoading:M}=(0,c.default)(X),$=X?.enabled||!1,{query:D,setQuery:F,category:B,setCategory:H,page:O,setPage:q,categories:z,filteredChannels:G,pagedChannels:K,totalPages:Q,rangeStart:V,rangeEnd:J}=(0,u.default)({channels:S}),Y=S.length,Z=G.length,ee=D.trim().length>0||"all"!==B,et=v&&!T&&(U||N),ea=(0,a.useCallback)(()=>{E([]),F(""),H("all"),q(1)},[H,q,F]),es=(0,a.useCallback)(async({value:e,selectedType:t,name:a})=>{if(!e)return void C("Enter a stream URL first.");let s=function(e,t){if("auto"!==t)return t;let a=e.toLowerCase();return a.includes(".m3u8")||a.includes(".m3u")?"m3u8":a.includes("<iframe")||a.includes("youtube.com/embed")?"iframe":"custom"}(e,t);if("iframe"===s){if(!(0,m.normalizeIframeSource)(e))return void C("Invalid iframe source.")}else if(!(0,m.isHttpUrl)(e))return void C("Enter a valid HTTP/HTTPS URL.");if("m3u8"===s){R(!0);try{let s="auto"===t?await g(e):{isPlaylist:!0,inferredType:""};if("iframe"===s.inferredType){ea(),P({id:`custom-url-${Date.now()}`,name:a||"Custom URL Stream",logo:"",type:"iframe",source:e,category:"User Stream",language:"",origin:"custom"}),C("");return}if(s.isPlaylist){let t=await (0,h.loadPlaylistChannelsFromUrl)(e);if(Array.isArray(t)&&t.length>1){let e=(a?t.find(e=>e.name?.trim().toLowerCase()===a.trim().toLowerCase()):null)||(a?{...t[0],name:a}:t[0]);E(t),F(""),H("all"),q(1),P(e),C(""),(0,p.logEvent)("custom_playlist_loaded",{count:t.length});return}}}finally{R(!1)}}ea(),P({id:`custom-url-${Date.now()}`,name:a||"Custom URL Stream",logo:"",type:s,source:e,category:"User Stream",language:"",origin:"custom"}),C(""),(0,p.logEvent)("custom_url_played",{type:s}),I("channelSwitch")},[I,ea,H,q,F]),el=async()=>{await es({value:e.trim(),selectedType:x,name:""})};return(0,a.useEffect)(()=>{let e=y(window.location.search,"url").trim();if(!e)return;let t=(y(window.location.search,"type")||"auto").trim().toLowerCase(),a=["auto","m3u8","iframe","custom"].includes(t)?t:"auto",s=y(window.location.search,"name").trim(),l=`${e}|${a}|${s}`;A.current!==l&&(A.current=l,j(!0),L(!0),f(""),b(a),Promise.resolve(es({value:e,selectedType:a,name:s})).finally(()=>{L(!1)}))},[es]),(0,t.jsxs)("main",{children:[(0,t.jsxs)("div",{className:"space-y-5 md:space-y-7",children:[(0,t.jsxs)("section",{className:"space-y-3 md:space-y-4",children:[v?null:(0,t.jsxs)("div",{className:"space-y-4 rounded-xl border border-steel/20 bg-white/80 px-4 py-3 shadow-card",children:[(0,t.jsxs)("div",{className:"grid gap-2.5 md:grid-cols-[1fr_auto_auto] md:items-center",children:[(0,t.jsx)("input",{value:e,onChange:e=>f(e.target.value),placeholder:"Paste stream URL (m3u8 / iframe / mp4)",className:"rounded-lg border border-steel/20 bg-white px-3 py-2.5 text-sm outline-none"}),(0,t.jsxs)("select",{value:x,onChange:e=>b(e.target.value),className:"rounded-lg border border-steel/20 bg-white px-3 py-2.5 text-sm outline-none",children:[(0,t.jsx)("option",{value:"auto",children:"Auto type"}),(0,t.jsx)("option",{value:"m3u8",children:"M3U8"}),(0,t.jsx)("option",{value:"iframe",children:"Iframe"}),(0,t.jsx)("option",{value:"custom",children:"Custom URL"})]}),(0,t.jsx)("button",{type:"button",onClick:el,disabled:N,className:"rounded-lg bg-sea px-4 py-2.5 text-sm font-semibold text-white transition hover:bg-[#0089d6] disabled:opacity-70",children:N?(0,t.jsx)("span",{className:"inline-flex items-center",children:(0,t.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white/90 border-r-transparent"})}):"Play IPTV"})]}),N?(0,t.jsx)("div",{className:"py-1",children:(0,t.jsx)(o.default,{size:"sm"})}):null,w?(0,t.jsx)("p",{className:"text-xs text-rose-700",children:w}):null]}),$&&X?.slots?.header?.enabled&&(0,t.jsx)(n.default,{slot:"header",adsConfig:X}),(0,t.jsx)(r.default,{selectedChannel:T,autoplay:!!T,isPlayerLoading:et,showAds:$,adsConfig:X,showRewardedCta:_,rewardedCtaLabel:k,isRewardedCtaLoading:M,onRewardedCtaClick:()=>{W("unlockStream")},emptyTitle:"No stream loaded",emptySubtitle:"Enter a URL to start streaming.",getMetaText:e=>`${e.type.toUpperCase()} stream`})]}),S.length>0?(0,t.jsxs)("section",{className:"space-y-4 rounded-2xl border border-steel/20 bg-white/90 p-3.5 shadow-card md:p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-steel",children:"Channel Browser"}),(0,t.jsxs)("span",{className:"rounded-full bg-sea/15 px-3 py-1 text-xs font-semibold text-sea",children:["Available: ",Y,ee?` \xb7 Filtered: ${Z}`:""]})]}),(0,t.jsx)(s.default,{query:D,onQueryChange:F,category:B,onCategoryChange:H,categories:z,queryPlaceholder:"Search playlist channels"}),(0,t.jsx)(i.default,{channels:K,selectedChannel:T,onSelect:e=>{P(e),(0,p.logEvent)("custom_playlist_channel_selected",{id:e.id,name:e.name}),I("channelSwitch")},showAds:$&&X?.slots?.inFeed?.enabled,adsConfig:X}),(0,t.jsx)(l.default,{page:O,totalPages:Q,rangeStart:V,rangeEnd:J,totalCount:G.length,onPrevious:()=>q(e=>Math.max(1,e-1)),onNext:()=>q(e=>Math.min(Q,e+1))})]}):null]}),$&&X?.slots?.belowPlayer?.enabled&&(0,t.jsx)(n.default,{slot:"belowPlayer",adsConfig:X})]})}e.s(["default",()=>x])},52572,e=>{e.v(t=>Promise.all(["static/chunks/5051d21f3324f986.js"].map(t=>e.l(t))).then(()=>t(65147)))},24225,e=>{e.v(t=>Promise.all(["static/chunks/e4fcff649ce4bfd7.js"].map(t=>e.l(t))).then(()=>t(39198)))}]);